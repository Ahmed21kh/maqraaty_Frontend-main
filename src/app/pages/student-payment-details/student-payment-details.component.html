<div class="registered_div">
  <div>
    <app-breadcrumb></app-breadcrumb>
   <nz-card nzTitle="حساب الطالب" nzBordered class=" !rounded-md !relative !my-4">
       <span nz-icon nzType="edit" class=" !text-xl !absolute !top-4 !left-5 !cursor-pointer  !text-blue-500" (click)="handleOpenEditModal(studentDetails)" nzTheme="fill"></span>
     @if (loadingData) {
       <div nz-row class=" w-full ">
         <div nz-col nzLg="3" nzMd="12">
           <nz-skeleton-element nzType="image"  style="height: 100%;" [nzBlock]="true" [nzActive]="true"></nz-skeleton-element>
         </div>
         <div nz-col nzLg="12" nzMd="12">
           <div class=" w-full flex flex-col gap-5 h-full">
           <nz-skeleton [nzActive]="true" [nzParagraph]="{rows:2}"></nz-skeleton>
           <!-- <nz-skeleton [nzActive]="true"></nz-skeleton>
           <nz-skeleton [nzActive]="true"></nz-skeleton> -->

           </div>
         </div>
       </div>
     }@else {
       <div nz-row nzGutter="24">
         <div nz-col nzLg="3" nzMd="12">
           @if (studentDetails.image !== '' && studentDetails.image !== null) {

             <img
               loading="lazy"
               width="auto"
               height="64"
               style="border-radius: 15px; margin: auto"
               [src]="url + '' + studentDetails.image"
               alt="img"
             />
             }@else {
             <img
               loading="lazy"
               width="auto"
               height="64"
               style="border-radius: 15px; margin: auto"
               [src]="'assets/user.png'"
               alt="img"
             />
             }
         </div>
         <div nz-col nzLg="12" nzMd="12">
           <div class=" flex flex-col gap-5">
             <div>
               <span>الكود :</span>
               <span class=" text-lg font-medium"> {{studentDetails.code | empty}} </span>
             </div>
             <div>
               <span>الاسم :</span>
               <span class=" text-lg font-medium"> {{studentDetails.name | empty}} </span>
             </div>
             <div>
               <span>رقم الهاتف :</span>
               <span class=" text-lg font-medium"> {{studentDetails.phone_1[0] | empty}} </span>
             </div>
             <div>
              <span> العنوان :</span>
              <span class=" text-lg font-medium"> {{studentDetails.address | empty}} </span>
            </div>
           </div>
         </div>
       </div>
     }
   </nz-card>

    <div class="registered_table" >
      <div style="margin-block: 20px;display:flex;align-items: center;justify-content: space-between;gap: 20px;">
        <!-- <nz-date-picker [nzAllowClear]="false" [nzInputReadOnly]="true" [nzDefaultPickerValue]="defaultDate" [(ngModel)]="dateFilter" class=" w-1/5 rounded-xl" (ngModelChange)="onChange($event)"></nz-date-picker> -->

       </div>
      <ng-template #pagination>
        <div class=" flex justify-between gap-2 items-center">
          <div class=" flex gap-2 items-center">
           <span>الاجمالي :</span>
           <span class=" text-base font-medium">{{totalAmount?totalAmount:0}}</span>
          </div>
          <nz-pagination [nzPageIndex]="pageNumber" [nzPageSize]="pageSize" [nzTotal]="total" (nzPageIndexChange)="changePagination($event)"></nz-pagination>
        </div>
      </ng-template>
      <ng-template #totalData>
        <!-- <div style="border: 1px solid #000;width: 50px;height: 50px;position: absolute;">
          {{total}}
        </div> -->
      </ng-template>
      <nz-table
        dir="rtl"
        [nzPageSize]="pageSize"
        #filterTable
        [nzTotal]="total"
        [nzShowTotal]="totalData"
        nzPaginationPosition="bottom"
        [nzFrontPagination]="false"
        [nzShowPagination]="false"
        [nzItemRender]="pagination"
        [nzLoading]="loadingSearch||loadingData"
        (nzPageIndexChange)="changePagination($event)"
        [nzData]="listOfData"
        nzTableLayout="fixed"
        [nzFooter]="pagination"
      >
        <thead>
          <tr>
            @for (column of listOfColumns; track $index) {
            <!-- <ng-template ngFor let-column [ngForOf]="listOfColumns"> -->
            <th
              style="text-align: center"
              [nzSortOrder]="column.sortOrder"
              [nzSortFn]="column.sortFn"
              [nzSortDirections]="column.sortDirections"
              [nzFilterMultiple]="column.filterMultiple"
              [nzFilters]="column.listOfFilter"
              [nzFilterFn]="column.filterFn"
            >
              {{ column.name | empty}}
            </th>

            <!-- </ng-template> -->
            }
            <th></th>
          </tr>
        </thead>
        <tbody>
          @for (data of filterTable.data; track $index) {
          <!-- <ng-template ngFor let-data [ngForOf]="filterTable.data"> -->
          <tr>
            <td >{{ data.studentDetails.code | empty}}</td>
            <td >{{ data.studentDetails.name | empty}}</td>
            <td>
              @if (data.studentDetails.image !== '') {

              <img
                nz-image
                loading="lazy"
                width="70"
                height="70"
                style="margin: auto"
                [nzSrc]="url + '' + data.studentDetails.image"
                alt="img"
                class=" cursor-pointer"
              />
              }@else {
              <img
                loading="lazy"
                width="70"
                height="70"
                style="margin: auto"
                [src]="'assets/user.png'"
                alt="img"
              />
              }
            </td>
            <td>{{ data.date | date:'dd-MM-YYYY' }}</td>
            <td>{{ data.amount | empty}}<span class="leading-relaxed"> {{ "ج" }} </span></td>
            <td>
              <div style="display: flex; justify-content: space-around">

                <!-- <button nz-button [nzType]="'primary'" class=" rounded-lg" (click)="showEditModal(data._id,data.student)">تعديل المصروفات</button> -->
                <span
                  nz-icon
                  nzType="delete"
                  (click)="handleOpenConfirmDelete(data?._id)"
                  style="
                    color: rgb(208, 19, 19);
                    font-size: 20px;
                    cursor: pointer;
                  "
                  nzTheme="fill"
                ></span>
              </div>
            </td>
          </tr>

          <!-- </ng-template> -->
          }
        </tbody>
      </nz-table>

      <nz-modal
      dir="rtl"
      [(nzVisible)]="isVisible"
      [nzTitle]="'تعديل بيانات الطالب'"
      (nzOnCancel)="handleCancel()"
      (nzOnOk)="handleSubmitEdit()"
      [nzFooter]="footer"
      [nzWidth]="'700px'"
      [nzStyle]="{ 'margin-top': '-38px' }"
      [nzBodyStyle]="{ 'overflow-y': 'auto', 'max-height': '720px' }"
    >
      <ng-container *nzModalContent>
        <form [autocomplete]="true" dir="rtl" [formGroup]="myForm">
          <div nz-row [nzGutter]="[24, 10]">
            <div nz-col nzXs="24" nzMd="12" nzLg="8" nzXl="8">
              <nz-form-label
                >الاسم <span style="color: red; margin-inline: 5px"> * </span>
              </nz-form-label>
              <input nz-input placeholder="ادخل الاسم " formControlName="name" />
              @if (f['name'].errors?.['required'] && f['name'].touched) {
              <p style="color: red">الاسم مطلوب</p>
              } @else if (f['name'].errors?.['minlength'] && f['name'].touched) {
              <p style="color: red">الاسم يجب ان يحتوي علي الاقل علي اربع حروف</p>
              } @else {
              <p></p>
              }
            </div>
            <div nz-col nzXs="24" nzMd="12" nzLg="8" nzXl="8">
              <nz-form-label
                >السن<span style="color: red; margin-inline: 5px"> * </span>
              </nz-form-label>
              <input
                nz-input
                type="number"
                placeholder="ادخل السن "
                formControlName="age"
              />
              @if (f['age'].errors?.['required'] && f['age'].touched) {
              <p style="color: red">السن مطلوب</p>
              } @else if (f['age'].errors?.['minlength'] && f['age'].touched) {
              <p style="color: red">الاسم يجب ان يحتوي علي الاقل علي اربع حروف</p>
              } @else {
              <p></p>
              }
            </div>
            <div nz-col nzXs="24" nzMd="12" nzLg="8" nzXl="8">
              <nz-form-label
                >السنة الدراسية<span style="color: red; margin-inline: 5px">
                  *
                </span>
              </nz-form-label>
              <input
                nz-input
                placeholder="ادخل السنة الدراسية "
                formControlName="study_year"
              />
              <!-- <nz-date-picker nzMode="year" class=" w-full" nzPlaceHolder="ادخل السنة الدراسية " formControlName="study_year" ></nz-date-picker> -->
              @if (f['study_year'].errors?.['required'] &&
              f['study_year'].touched) {
              <p style="color: red">السنة الدراسية مطلوبة</p>
              } @else if (f['study_year'].errors?.['minlength'] &&
              f['study_year'].touched) {
              <p style="color: red">الاسم يجب ان يحتوي علي الاقل علي اربع حروف</p>
              } @else {
              <p></p>
              }
            </div>
            <div nz-col nzXs="24" nzMd="12" nzLg="8" nzXl="8">
              <nz-form-label
                >رقم موبايل الطالب
                <span style="color: red; margin-inline: 5px"> * </span>
              </nz-form-label>
              <div formArrayName="phone_1">
                @for (item of arr_phone_1.controls; track $index) {
                <div
                  style="
                    display: flex;
                    flex-direction: row;
                    align-items: center;
                    gap: 8px;
                  "
                  [style]="'margin-bottom:10px'"
                >
                  <input
                    nz-input
                    type="text"
                    [id]="$index"
                    placeholder="ادخل رقم الموبايل "
                    [formControlName]="$index"
                  />
                  @if ($index == 0) {
                  <button
                    (click)="handleAdd('phone_1')"
                    nz-button
                    nzType="primary"
                    style="
                      border-radius: 15px;
                      padding: 5px;
                      width: auto;
                      height: auto;
                    "
                    class=""
                    class=""
                  >
                    <span style="font-size: 12px"  nz-icon nzType="plus"></span>
                  </button>

                  }@else {
                  <button
                    (click)="handleRemove($index, 'phone_1')"
                    nz-button
                    nzType="primary"
                    style="
                      border-radius: 15px;
                      padding: 5px;
                      width: auto;
                      height: auto;
                    "
                    class=""
                    class=""
                  >
                    <span style="font-size: 12px" nz-icon nzType="minus"></span>
                  </button>
                  }
                </div>
                @if (item.errors?.['required'] && item.touched) {
                <p style="color: red">رقم الموبايل مطلوب</p>
                }@else if ((item.errors?.['pattern']) && item.touched) {
                <p style="color: red">رقم الموبايل غير صحيح</p>
                }@else if ((item.errors?.['min']) && item.touched) {
                <p style="color: red">رقم الموبايل يجب ان يكون علي الاقل 11</p>
                } @else {
                <p></p>
                } }
              </div>
            </div>
            <div nz-col nzXs="24" nzMd="12" nzLg="8" nzXl="8">
              <nz-form-label>رقم موبايل الام</nz-form-label>
              <div formArrayName="phone_2">
                @for (item of arr_phone_2.controls; track $index) {
                <div
                  style="
                    display: flex;
                    flex-direction: row;
                    align-items: center;
                    gap: 8px;
                  "
                  [style]="'margin-bottom:10px'"
                >
                  <input
                    nz-input
                    type="text"
                    [id]="$index"
                    placeholder="ادخل رقم الموبايل "
                    [formControlName]="$index"
                  />
                  @if ($index == 0) {
                  <button
                    (click)="handleAdd('phone_2')"
                    nz-button
                    nzType="primary"
                    style="
                      border-radius: 15px;
                      padding: 5px;
                      width: auto;
                      height: auto;
                    "
                    class=""
                  >
                    <span style="font-size: 12px" nz-icon nzType="plus"></span>
                  </button>

                  }@else {
                  <button
                    (click)="handleRemove($index, 'phone_2')"
                    nz-button
                    nzType="primary"
                    style="
                      border-radius: 15px;
                      padding: 5px;
                      width: auto;
                      height: auto;
                    "
                    class=""
                  >
                    <span style="font-size: 12px" nz-icon nzType="minus"></span>
                  </button>
                  }
                </div>
                @if (item.errors?.['required'] && item.touched) {
                <p style="color: red">رقم الموبايل مطلوب</p>
                }@else if ((item.errors?.['pattern']) && item.touched) {
                <p style="color: red">رقم الموبايل غير صحيح</p>
                }@else if ((item.errors?.['min']) && item.touched) {
                <p style="color: red">رقم الموبايل يجب ان يكون علي الاقل 11</p>
                } @else {
                <p></p>
                } }
              </div>
            </div>
            <div nz-col nzXs="24" nzMd="12" nzLg="8" nzXl="8">
              <nz-form-label>رقم موبايل الاب</nz-form-label>
              <div formArrayName="phone_3">
                @for (item of arr_phone_3.controls; track $index) {
                <div
                  style="
                    display: flex;
                    flex-direction: row;
                    align-items: center;
                    gap: 8px;
                  "
                  [style]="'margin-bottom:10px'"
                >
                  <input
                    nz-input
                    type="text"
                    [id]="$index"
                    placeholder="ادخل رقم الموبايل "
                    [formControlName]="$index"
                  />
                  @if ($index == 0) {
                  <button
                    (click)="handleAdd('phone_3')"
                    nz-button
                    nzType="primary"
                    style="
                      border-radius: 15px;
                      padding: 5px;
                      width: auto;
                      height: auto;
                    "
                    class=""
                  >
                    <span style="font-size: 12px" nz-icon nzType="plus"></span>
                  </button>

                  }@else {
                  <button
                    (click)="handleRemove($index, 'phone_3')"
                    nz-button
                    nzType="primary"
                    style="
                      border-radius: 15px;
                      padding: 5px;
                      width: auto;
                      height: auto;
                    "
                    class=""
                  >
                    <span style="font-size: 12px" nz-icon nzType="minus"></span>
                  </button>
                  }
                </div>
                @if (item.errors?.['required'] && item.touched) {
                <p style="color: red">رقم الموبايل مطلوب</p>
                }@else if ((item.errors?.['pattern']) && item.touched) {
                <p style="color: red">رقم الموبايل غير صحيح</p>
                }@else if ((item.errors?.['min']) && item.touched) {
                <p style="color: red">رقم الموبايل يجب ان يكون علي الاقل 11</p>
                } @else {
                <p></p>
                } }
              </div>
            </div>
            <div nz-col nzXs="24" nzMd="12" nzLg="8" nzXl="8">
              <nz-form-label
                >التليفون الارضي
                <span style="color: red; margin-inline: 5px"> * </span>
              </nz-form-label>
              <input
                nz-input
                type="text"
                placeholder="ادخل التليفون الارضي "
                formControlName="landline"
              />
              @if (f['landline'].errors?.['required'] && f['landline'].touched) {
              <p style="color: red">التليفون الارضي مطلوب</p>
              } @else if (f['landline'].errors?.['min'] && f['landline'].touched)
              {
              <p style="color: red">
                التليفون الارضي يجب ان يحتوي علي الاقل علي ثمانية ارقام
              </p>
              } @else {
              <p></p>
              }
            </div>
            <div nz-col nzXs="24" nzMd="12" nzLg="8" nzXl="8">
              <nz-form-label
                >تاريخ التسجيل بالمقرأة<span
                  style="color: red; margin-inline: 5px"
                >
                  *
                </span>
              </nz-form-label>
              <nz-date-picker
                class="w-full"
                nzPlaceHolder="ادخل التاريخ "
                formControlName="date"
              ></nz-date-picker>

              @if (f['date'].errors?.['required'] && f['date'].touched) {
              <p style="color: red">التاريخ مطلوب</p>
              } @else if (f['date'].errors?.['minlength'] && f['date'].touched) {
              <p style="color: red">الاسم يجب ان يحتوي علي الاقل علي اربع حروف</p>
              } @else {
              <p></p>
              }
            </div>
            <div nz-col nzXs="24" nzMd="12" nzLg="8" nzXl="8">
              <nz-form-label
                >هل الطالب ازهري ؟<span style="color: red; margin-inline: 5px">
                  *
                </span>
              </nz-form-label>
              <nz-radio-group formControlName="is_Azhar" nzName="radiogroup">
                <label nz-radio nzValue="نعم">نعم</label>
                <label nz-radio nzValue="لا">لا</label>
              </nz-radio-group>
              @if (f['is_Azhar'].errors?.['required'] && f['is_Azhar'].touched) {
              <p style="color: red">هذا الحقل مطلوب</p>
              } @else {
              <p></p>
              }
            </div>
            <div nz-col nzXs="24" nzMd="12" nzLg="24" nzXl="24">
              <nz-form-label
                >هل للطالب اقارب ؟<span style="color: red; margin-inline: 5px">
                  *
                </span>
              </nz-form-label>
              <nz-radio-group formControlName="has_relative" nzName="radiogroup">
                <label nz-radio nzValue="نعم">نعم</label>
                <label nz-radio nzValue="لا">لا</label>
              </nz-radio-group>
              @if (f['has_relative'].errors?.['required'] &&
              f['has_relative'].touched) {
              <p style="color: red">هذا الحقل مطلوب</p>
              } @else {
              <p></p>
              } @if (f['has_relative'].value == 'نعم') {
              <ng-container>
                <nz-form-label
                  >الاسم<span style="color: red; margin-inline: 5px"> * </span>
                </nz-form-label>
                <div formArrayName="relative">
                  @for (item of arr_relative.controls; track $index) {
                  <div
                    style="
                      display: flex;
                      flex-direction: row;
                      align-items: center;
                      gap: 8px;
                    "
                    [style]="'margin-bottom:10px'"
                  >
                    <!-- <input
                        nz-input
                        type="text"
                        [id]="$index"
                        placeholder="ادخل رقم الموبايل "
                        [formControlName]="$index"
                      /> -->
                    <nz-select
                      nzShowSearch
                      nzAllowClear
                      nzPlaceHolder="Select a person"
                      class="w-full"
                      [id]="$index"
                      [formControlName]="$index"
                    >
                      @for (item of students_Name ; track $index) {

                      <nz-option
                        [nzKey]="item._id"
                        [nzLabel]="item.name"
                        [nzValue]="item._id"
                      ></nz-option>
                      }@empty { }
                    </nz-select>
                    @if ($index == 0) {
                    <button
                      (click)="handleAdd('relative')"
                      nz-button
                      nzType="primary"
                      style="
                        border-radius: 15px;
                        padding: 5px;
                        width: auto;
                        height: auto;
                      "
                    >
                      <span style="font-size: 12px" nz-icon nzType="plus"></span>
                    </button>

                    }@else {
                    <button
                      (click)="handleRemove($index, 'relative')"
                      nz-button
                      nzType="primary"
                      style="
                        border-radius: 15px;
                        padding: 5px;
                        width: auto;
                        height: auto;
                      "
                    >
                      <span style="font-size: 12px" nz-icon nzType="minus"></span>
                    </button>
                    }
                  </div>
                  @if (item.errors?.['required'] && item.touched) {
                  <p style="color: red">الاسم مطلوب</p>
                  }@else if ((item.errors?.['min']) && item.touched) {
                  <p style="color: red">الاسم يجب ان يكون علي الاقل 4 احرف</p>
                  } @else {
                  <p></p>
                  } }
                </div>
              </ng-container>
              } @else {
              <p></p>
              }
            </div>
            <div nz-col nzXs="24" nzMd="24" nzLg="16" nzXl="16">
              <nz-form-label
                >هل الطالب يستثنى من دفع المصروفات ؟<span
                  style="color: red; margin-inline: 5px"
                >
                  *
                </span>
              </nz-form-label>
              <nz-radio-group formControlName="is_payment" nzName="radiogroup">
                <label nz-radio  nzValue="نعم">نعم</label>
                <label nz-radio nzValue="لا">لا</label>
              </nz-radio-group>
              @if (f['is_payment'].errors?.['required'] &&
              f['is_payment'].touched) {
              <p style="color: red">هذا الحقل مطلوب</p>
              } @else {
              <p></p>
              }
            </div>

            <div nz-col nzXs="24" nzMd="12" nzLg="8" nzXl="8">
              @if (this.myForm.value.is_payment == 'لا' ) {
              <nz-form-label> المصروفات </nz-form-label>
              <input
                nz-input
                min="0"
                type="number"
                class="w-full"
                placeholder="ادخل المصروفات "
                formControlName="amount"
              />

              @if (pf['amount'].errors?.['required'] && pf['amount'].touched) {
              <p style="color: red">المصروفات مطلوبة</p>
              } @else {
              <p></p>
              } }
            </div>
            <div nz-col nzXs="24" nzMd="12" nzLg="12" nzXl="12">
              <nz-form-label
                >العنوان <span style="color: red; margin-inline: 5px"> * </span>
              </nz-form-label>
              <textarea
                nz-input
                placeholder="ادخل العنوان "
                formControlName="address"
                [nzAutosize]="{ minRows: 5, maxRows: 5 }"
                [rows]="5"
              ></textarea>
              @if (f['address'].errors?.['required'] && f['address'].touched) {
              <p style="color: red">العنوان مطلوب</p>
              } @else {
              <p></p>
              }
            </div>
            <div nz-col nzXs="24" nzMd="12" nzLg="12" nzXl="12">
              <nz-form-label>الملاحظات</nz-form-label>
              <textarea
                nz-input
                placeholder="ادخل الملاحظات "
                formControlName="notes"
                [nzAutosize]="{ minRows: 5, maxRows: 5 }"
                [rows]="5"
              ></textarea>
            </div>
            <div nz-col nzXs="24" nzMd="24" nzLg="24" nzXl="24">
              <nz-form-label
                >الصورة <span style="color: red; margin-inline: 5px"> * </span>
              </nz-form-label>
              @if (!isEdit) {
              <nz-upload
                nzType="drag"
                [nzMultiple]="false"
                [nzAction]="url+'api/upload-image'"
                nzName="file"
                (nzChange)="handleChange($event)"
              >
                <p class="ant-upload-drag-icon">
                  <span nz-icon nzType="inbox"></span>
                </p>
                <p class="ant-upload-text">اضغط هنا لرفع الصورة</p>
                <!-- <p class="ant-upload-hint">
                Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files
              </p> -->
              </nz-upload>
              @if (myForm.value.image) {
              <div class="mt-3 w-32 h-32 bg-neutral-300 rounded-lg">
                <img
                  nz-image
                  class="w-full h-full overflow-hidden inline-block cursor-zoom-in rounded-lg"
                  [nzSrc]="url + '' + myForm.value.image"
                  alt="img"
                />
              </div>

              } }@else {
              <div nz-row [nzGutter]="[24, 24]" nzAlign="middle">
                <div nz-col nzSpan="24">
                  @if (myForm.value.image !== '') {
                  <img
                    style="display: inline-block; cursor: zoom-in"
                    dir="ltr"
                    nz-image
                    width="100px"
                    height="100px"
                    [nzSrc]="url + '' + myForm.value.image"
                    alt=""
                  />
                  } @else {
                  <img
                    style="display: inline-block"
                    dir="ltr"
                    nz-image
                    width="100px"
                    height="100px"
                    [nzSrc]="'assets/user.png'"
                    alt=""
                  />
                  }
                </div>
                <div nz-col nzSpan="24">
                  <nz-upload
                    [nzMultiple]="false"
                    [nzAction]="url+'api/upload-image'"
                    nzName="file"
                    (nzChange)="handleChange($event)"
                  >
                    <button
                      nz-button
                      nzType="default"
                      style="display: flex; align-items: center; gap: 10px"
                    >
                      <span nz-icon nzType="upload"></span>
                      Click to Upload
                    </button>
                  </nz-upload>
                </div>
              </div>
              } @if (f['name'].errors?.['required'] && f['name'].touched) {
              <p style="color: red">الصورة مطلوب</p>
              } @else {
              <p></p>
              }
            </div>
          </div>
        </form>
      </ng-container>
    </nz-modal>
    <ng-template #footer>
      <div
        style="
          display: flex;
          align-items: center;
          gap: 10px;
          direction: ltr !important;
        "
      >
        <button
          (click)="handleCancel()"
          nz-button
          nzType="default"
          [disabled]="loadingAdd || loadingAEdit"
          style="
            display: flex;
            align-items: center;
            gap: 15px;
            border-radius: 15px;
          "
        >
          الغاء
        </button>

        <button
          (click)="handleSubmitEdit()"
          nz-button
          [nzLoading]="loadingAEdit"
          nzType="primary"
          style="
            display: flex;
            align-items: center;
            gap: 15px;
            border-radius: 15px;
          "
          class=" "
        >
          تعديل
        </button>
      </div>
    </ng-template>

    </div>
    <nz-modal
    [(nzVisible)]="editModal"
    nzTitle="تعديل المصروفات للطالب"
    (nzOnCancel)="cancelEditModal()"
    nzCancelText="الغاء"
    nzOkText="تعديل"
    [nzFooter]="editFooter"
    (nzOnOk)="updatePayment()"
  >
    <ng-container *nzModalContent>
      <div nz-row [nzGutter]="[24,24]">
        <div nz-col nzXs="24" nzSm="24">
         <nz-form-label >المبلغ</nz-form-label>
         <input nz-input  type="number" class=" w-full" placeholder="ادخل المبلغ" formControlName="amount" >
        </div>
        <div nz-col nzXs="24" nzSm="24">
          <nz-form-label >التاريخ</nz-form-label>
          <nz-date-picker formControlName="date" class="w-full" nzPlaceHolder="ادخل التاريخ"></nz-date-picker>
        </div>
      </div>
    </ng-container>
  </nz-modal>
  <ng-template #editFooter>
    <div
      style="
        display: flex;
        align-items: center;
        gap: 10px;
        direction: ltr !important;
      "
    >
      <button
        (click)="cancelEditModal()"
        nz-button
        nzType="primary"
        style="
          display: flex;
          align-items: center;
          gap: 15px;
          border-radius: 15px;
        "
      >
        الغاء
      </button>
      <button
        (click)="updatePayment()"
        nz-button
        nzType="primary"
        style="
          display: flex;
          align-items: center;
          gap: 15px;
          border-radius: 15px;
        "
      >
        تعديل
      </button>
    </div>
  </ng-template>

    <nz-modal
    [(nzVisible)]="isDeleteModal"
    nzTitle="حذف المصروفات للطالب"
    (nzOnCancel)="handleCancelConfirmDelete()"
    nzCancelText="الغاء"
    nzOkText="حذف"
    [nzFooter]="delFooter"
    (nzOnOk)="handleDelete()"
  >
    <ng-container *nzModalContent>
      <div>
        <h1 style="font-size: 22px;text-align: end;">هل انت متأكد من حذف هذا المصروف للطالب ؟</h1>
      </div>
    </ng-container>
  </nz-modal>
  <ng-template #delFooter>
    <div
      style="
        display: flex;
        align-items: center;
        gap: 10px;
        direction: ltr !important;
      "
    >
      <button
        (click)="handleCancelConfirmDelete()"
        nz-button
        nzType="default"
        style="
          display: flex;
          align-items: center;
          gap: 15px;
          border-radius: 15px;
        "
      >
        الغاء
      </button>
      <button
        (click)="handleDelete()"
        nz-button
        nzType="primary"
        nzDanger
        style="
          display: flex;
          align-items: center;
          gap: 15px;
          border-radius: 15px;
        "
      >
        حذف
      </button>
    </div>
  </ng-template>
</div>
  </div>
